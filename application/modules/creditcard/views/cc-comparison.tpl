<!doctype html>
<html>
    <head>
        <meta charset="utf-8">
        <meta name="viewport" content="width=device-width, initial-scale=1.0">
        <title>MoneyHero</title>
        <link href="assets/css/bootstrap.css" rel="stylesheet" type="text/css">
        <link href="assets/css/bootstrap-responsive.css" rel="stylesheet" type="text/css">
        
        <link href="assets/css/font-awesome.css" rel="stylesheet" type="text/css">
        <link href="assets/css/custom.css" rel="stylesheet" type="text/css">
		<link href="assets/css/credit-cards.css" rel="stylesheet" type="text/css">
        <!-- HTML5 shim for IE backwards compatibility -->
        <!--[if lt IE 9]>
        <script src="http://html5shim.googlecode.com/svn/trunk/html5.js"></script>
        <![endif]-->
		<style type="text/css" media="screen">
		.combo {
			height: auto !important;
			width: 250px !important;
		}
		</style>	
    </head>

    <body>
        <div class="topline_g"></div><div class="topline_b"></div>
        
        <section class="head1"> <!-- End Head top -->
            <div class="sec_grp">
                <div class="container-fluid">
                    <div class="head1 row-fluid">
                        <div class="head_p1 span9">Malaysia's leading comparison portal!</div>
                        <div class="span3">
                            <ul class="follow_us">
                                <li><div style="text-indent: 0px; margin: 0px; padding: 0px; background: none repeat scroll 0% 0% transparent; border-style: none; float: none; line-height: normal; font-size: 1px; vertical-align: baseline; display: inline-block; width: 90px; height: 20px;" id="___plusone_0"><iframe width="100%" scrolling="no" frameborder="0" hspace="0" marginheight="0" marginwidth="0" style="position: static; top: 0px; width: 90px; margin: 0px; border-style: none; left: 0px; visibility: visible; height: 20px;" tabindex="0" vspace="0" id="I0_1383128671179" name="I0_1383128671179" src="https://apis.google.com/u/0/_/+1/fastbutton?usegapi=1&amp;bsv=o&amp;size=medium&amp;origin=http%3A%2F%2Fdev.MoneyHero.hk&amp;url=http%3A%2F%2Fdev.MoneyHero.hk%2F&amp;gsrc=3p&amp;ic=1&amp;jsh=m%3B%2F_%2Fscs%2Fapps-static%2F_%2Fjs%2Fk%3Doz.gapi.en.HOGdvuAbKyw.O%2Fm%3D__features__%2Fam%3DAQ%2Frt%3Dj%2Fd%3D1%2Frs%3DAItRSTOigExXmGXLeRZJhMfmz-wMukm0qQ#_methods=onPlusOne%2C_ready%2C_close%2C_open%2C_resizeMe%2C_renderstart%2Concircled%2Cdrefresh%2Cerefresh%2Conload&amp;id=I0_1383128671179&amp;parent=http%3A%2F%2Fdev.MoneyHero.hk&amp;pfname=&amp;rpctoken=22729729" data-gapiattached="true" title="+1"></iframe></div></li>
                                <li><iframe src="//www.facebook.com/plugins/like.php?href=http%3A%2F%2Ffacebook.com%2FMoneyHero.hk&amp;width=450&amp;height=21&amp;colorscheme=light&amp;layout=button_count&amp;action=like&amp;show_faces=false&amp;send=false" scrolling="no" frameborder="0" style="border:none; overflow:hidden; width:100px; height:21px;" allowtransparency="true"></iframe></li>
                            </ul>
                        </div>
                    </div>
                </div>
            </div>
        </section> <!-- Head top -->
        
        <section> <!-- Header with logo -->
            <div class="container-fluid">
                <div class="sec_grp">
                    <header class="row-fluid">
                        <div class="span6">
                            <a href="/">
                                <h1 class="span12">
                                    <img src="assets/img/logo.png" alt="MoneyHero" width="311" height="66">
                                    <p>MoneyHero</p>
                                    <p>I compare, you save</p>
                                </h1>
                            </a>
                        </div>
                        <div class="span3 text-right customer_srv">
                          <ul class="unstyled">
                            <li>Customer Service</li>
                            <li id="customer_srv_no">03 2035 5551</li>
                            <li>Mon - Fri, 9am - 7pm</li>
                            </ul>
                        </div>
                        <div class="span3 text-right customer_srv">
                          <img alt="Compare Hero, the hero of comparison" id="top_mascot" src="assets/img/pose1.png">
                          <img alt="SSL Secured" id="top_norton" src="assets/img/norton.png">
                        </div>
                    </header>
                </div>
            </div>
        </section> <!-- Header with logo -->
        
        <section class="section-credit-card"> <!-- End Hero Unit -->
            <div class="container-fluid">
                <div class="sec_grp">
                    <nav class="navbar navbar-inverse">
                        <div class="navbar-inner">
                            <a class="btn btn-navbar" data-toggle="collapse" data-target=".nav-collapse">
                                <span class="icon-bar"></span>
                                <span class="icon-bar"></span>
                                <span class="icon-bar"></span>
                            </a>
                            <a class="brand active" href="#"><span class="icon-home icon-2x"></span></a>
                            <div class="nav-collapse">
                                <ul class="nav ">
                                    <li class="active"><a href="#">Cards</a></li>
                                    <li><a href="#">Loans</a></li>
                                    <li><a href="#">Deposits</a></li>
                                    <li><a href="#">Insurance</a></li>
                                    <li><a href="#">Mobile</a></li>
                                    <li><a href="#">Internet Plans</a></li>
                                </ul>
                            </div>
                        </div>
                        <div class="row-fluid">
                            <nav id="breadcrumb_body" class="span12">
                            	<div class="span8">
									<ul class="breadcrumb">
                                        <li class="disabled">You are here: </li>
                                        <li><a href="#" title="Homepage">Home</a></li>
                                    </ul>
                                </div>
                            </nav>
                        </div>
                    </nav>
                    <section id="sec_credit_results" class="hero_unit refine_result"> <!-- Hero Unit -->
    <div class="container-fluid">
        <div class="sec_grp">
            <div id="header_results_1">
    <div class="row-fluid">
        <div class="span12 im_relative">
            <h3>Compare the best Credit Cards deals now</h3>
            <div class="header_text">
              <span>We check <b>thousands of prices daily.</b> You can check credit card interest rates and perks to choose the best credit card option for your needs.
                  Enjoy <b>exclusive</b> offers from Hong Kong providers by finding credit card promos and directly applying online for limited offers.
                  Find the best credit card in Hong Kong with the perfect combination of interest rates, perks, and promos all in one place: <b>MoneyHero.</b> 
              </span>
            </div>
            <div class="media_sharing">
                <!-- AddThis Button BEGIN -->
                <span class='st_facebook_hcount' title='Facebook' <?php /*displayText='Facebook'*/ ?> ></span>
                <span class='st_twitter_hcount' title='Tweet' <?php /*displayText='Tweet'*/ ?> ></span>
                <span class='st_linkedin_hcount' title='LinkedIn' <?php /*displayText='LinkedIn'*/ ?> ></span>
                <span class='st_googleplus_hcount' title='Google +' <?php /*displayText='Google +'*/ ?> ></span>
                <span class='st_email_hcount' title='Email' <?php /*displayText='Email'*/ ?> ></span>
                <!--<span class='st_sharethis_hcount' displayText='ShareThis'></span>-->
                <script type="text/javascript">var switchTo5x=true;</script>
                <script type="text/javascript" src="http://w.sharethis.com/button/buttons.js"></script>
                <script type="text/javascript">stLight.options({publisher: "6d7e0688-4e22-458a-83ee-23ee78bcce30", doNotHash: false, doNotCopy: false, hashAddressBar: false, useFastShare: false});</script>
                <!-- AddThis Button END -->
            </div>
            <img alt="customer promise" src="assets/img/get_it_cheaper.png" id="img_cheaper">

            <span id="try_it2"><h3>Try It, It's Free!</h3></span>
            <span style="display: none;" class="visible-phone" id="try_it_arrow"></span>
        </div>
    </div>
</div>            
			<div id="credit_results_grp3">
                
            </div>
        </div>
    </div>

    <span id="resultsTop"></span>

    <div class="clearfix" id="tab_menu"> <!-- MAIN TAB MENU -->
        
    </div> <!-- END MAIN TAB MENU -->
</section>
                    
                </div>
            </div>
        </section> <!-- Hero Unit --><!-- End Main Box Services -->
        <section id="credit_results_tab">
    

    <div class="sec_grp"> <!-- GROUPING -->


        <div data-ng-show="step == 3 || startDelay" class="space1">
            <div id="results">
                
                <!-- insert rows here -->
				
				<p>Loading ...</p>
				<div class="progress progress-striped active">
				  <div class="progress-bar progress-bar-info" role="progressbar" aria-valuenow="20" aria-valuemin="0" aria-valuemax="100" style="width: 55%">
				    <span class="sr-only">55% Complete</span>
				  </div>
				</div>
				
				<!-- insert rows here //end -->                                
                
            </div>
            <div id="results-tail"></div>    
        </div>
    </div>


    <!--Modal Pop Up-->
    <div style="padding-top: 56px;" class="main-modal-wrapper modal hide fade" id="credit_reg">
        <img src="assets/img/overlayapplyingregistration3_03.png" style="position: absolute; top: 10px; left: 21px;">
        <img src="assets/img/overlayapplyingregistration3_06.jpg" style="position: absolute; top: 10px; right: 21px;">

        <div style="margin: 0 auto; background: ;" class="modal-main-content clearfix" id="main_content">
            <div class="modal-left-content">
                <div style="background: url('/') no-repeat left 16px top 15px; " class="ch-modal-branding clearfix">
                    <!--<img class="pull-left" src="/templates/comparehero_20/img/overlayapplyingregistration3_11.png" style="margin-left:10px; margin-top:20px;">-->
                    <h1><span id="brand">Brand Name</span> <br> <span style="font-size:22px;line-height:1.1;" id="prod">Product Name</span></h1>
                    <p class="brand_desc">Simply enter and submit your information below.
                        A sales representive will be in contact with you.
                    </p>
                </div>
                <form id="frm_cr_signup" action="" class="ng-pristine ng-valid" novalidate>
                    <div class="div_grp clearfix">
                        <label class="control-label">Name:</label>
                        <div style="margin-left:160px;" class="controls" id="control_name">
                            <br class="visible-phone">
                            <div>
                                <input type="text" value="" placeholder="first" name="txt_fname" id="txt_fname">
                                <label class="err"></label>
                            </div>
                            <div>
                                <input type="text" value="" placeholder="last" name="txt_lname" id="txt_lname">
                                <label class="err"></label>
                            </div>

                        </div>
                    </div>
                    <div class="div_grp clearfix">
                        <label style="width: 150px;" class="control-label">Email results to you:</label>
                        <br class="visible-phone">
                        <div style="margin-left:180px;" class="controls">
                            <input type="text" value="aadsdsd@yad.com" placeholder="your-email@mail.com" name="txt_email" id="txt_email">
                            <label class="err"></label>

                        </div>
                    </div>
                    <div class="div_grp">
                        <label style="width: 150px;" class="control-label">Your Mobile Number:</label>
                        <br class="visible-phone">
                        <div class="controls">
                            <input type="text" value="" name="txt_mobile" id="txt_mobile" ng-controller="appController" class="ng-scope">
                            <label class="err"></label>

                        </div>
                    </div>
                    <div class="div_grp">
                        <label style="width: 150px;" class="control-label">Your monthly gross <br class="hidden-phone">
                            income?</label>
                        <br class="visible-phone">
                        <div class="controls">
                            <!--<input id="txt_gross" name="txt_gross" type="text">-->
                            
                            <select style="width: 274px!important" class="combo btn cbo_salary" id="cbo_gross">
                                <option value="0">Prefer not to say</option>
                                <option value="1500" class="chev">RM1500</option>
                                <option value="3000" class="chev">RM3000</option>
                                <option value="4500" class="chev">RM4500</option>
                                <option value="6000" class="chev">RM6000</option>
                                <option value="7500" class="chev">RM7500</option>
                                <option value="999000" class="chev">RM9000+</option>
                            </select>
                            
                            <label class="err"></label>
                        </div>
                    </div>
                    <div class="div_grp">
                        <label style="width: 150px;" class="control-label">Your closest city?</label>
                        <br class="visible-phone">
                        <div class="controls">
                            <select style="width: 274px!important" class="combo btn cbo_salary">
                            <option value="0"></option>
                            <option value="Kuala Lumpur" class="chev">Kuala Lumpur</option>
                            <option value="Kajang" class="chev">Kajang</option>
                            <option value="Klang" class="chev">Klang</option>
                            <option value="Subang Jaya" class="chev">Subang Jaya</option>
                            <option value="George Town" class="chev">George Town</option>
                            <option value="Ipoh" class="chev">Ipoh</option>
                            <option value="Petaling Jaya" class="chev">Petaling Jaya</option>
                            <option value="Selayang" class="chev">Selayang</option>
                            <option value="Johor Bahru" class="chev">Johor Bahru</option>
                            <option value="Malacca City" class="chev">Malacca City</option>
                            <option value="Ampang Jaya" class="chev">Ampang Jaya</option>
                            <option value="Kota Kinabalu" class="chev">Kota Kinabalu</option>
                            <option value="Sungai Petani" class="chev">Sungai Petani</option>
                            <option value="Kuantan" class="chev">Kuantan</option>
                            <option value="Alor Setar" class="chev">Alor Setar</option>
                            <option value="Tawau" class="chev">Tawau</option>
                            <option value="Sandakan" class="chev">Sandakan</option>
                            <option value="Kuala Terengganu" class="chev">Kuala Terengganu</option>
                            <option value="Kota Bharu" class="chev">Kota Bharu</option>
                            <option value="Seremban" class="chev">Seremban</option>
                            </select>
                        </div>
                    </div>
                    <div class="we_value">         
                        <i class="icon-lock lckicon"></i>
                        <span>We value your privacy and will never share your information without your permission</span>
                    </div>    
                    <input type="hidden" value="" id="comurl" name="comurl">
                    <div style="background: -webkit-linear-gradient(top, , );
                    background: -moz-linear-gradient(top, , );
                    background: -ms-linear-gradient(top, , );
                    background: -o-linear-gradient(top, , );
                    background-image: -ms-linear-gradient(top,  0%,  100%);
                    color: #fff;" class="control-group btn_submit">
                        <a href="#" id="btn_submit"> Submit <span class="icon-double-angle-right"></span></a>
                    </div>

                    
                    <span style="color:#8a827e;font-size: 11px;"><input type="checkbox" style="float:left;margin-left: 179px;display:inline-block;height:14px;margin-right:10px;" name="chkAgree" id="chkAgree" checked="checked"> Accepting <a target"_blank"="" href="/terms">Terms &amp; Conditions</a></span>
                </form>

                <!-- <div class="div_grp">
                <button type="submit">Submit</button>
                </div>-->
                
            </div>

            <div class="modal-right-content">
                <p>Fill in form <br>and submit</p>
                <img src="assets/img/overlayapplyingregistration3.png">
                <p>Check your email inbox and prepare documents</p>
                <img src="assets/img/overlayapplyingregistration3.png">
                <p>Submit to the bank</p>
                <img src="assets/img/overlayapplyingregistration4-02.png" class="mouse">
            </div>

        </div>
        <p align="right" style="margin-right:20px;" class="got_q">Got questions? Contact MoneyHero at 03-2035 5551 (Mon - Fri, 9am to 7pm)</p>             

    </div>
    <!--End Of Modal Pop Up-->
</section>
	<section class="light-gray newsletter"> <!-- Saving tips -->
            <div class="custom" id="">
	<form class="" id="formAcymailing99381" action="http://dev.MoneyHero.hk/" onsubmit="return submitacymailingform('optin','formAcymailing99381')" method="post" name="formAcymailing99381">
		<div class="sec_grp">
        	<div class="saving_tip row-fluid">
            	<div id="free_mr" class="span4">                            
                    <span class="p_save_tips">Free Money Saving Tips</span>
                    <span class="p_malaysians">For Malaysians</span>
                </div>
                <div class="span1 joining-icon">
                	<span class="icon-double-angle-right icon-5x hidden-phone"></span>
                </div>
                <div class="span7">
                  <div class="input-append">
                      <!-- <input class="input-large" id="appendedInput" type="text"> -->
                      <input type="text" class="input-large inputbox" id="user_email_formAcymailing99381" name="user[email]" placeholder="Enter your email address here and save!" value="">
                      <br class="visible-phone">
                      <a class="btn-nl" href="#" onclick="return submitacymailingform('optin','formAcymailing99381'); dataLayer.push({'event': 'eventTracking', 'category': 'newsletter', 'action': 'subscribe', 'label': 'otherpage', 'value': true});">Get Free Access Now!</a>
                  </div>
                  <div class="span12 nevershare">
                  		<span class="icon-lock"></span> We won't share your email address.
                  </div>
                </div>
            </div>
        </div>

			<input type="hidden" name="ajax" value="1">
		<input type="hidden" name="ctrl" value="sub">
		<input type="hidden" name="task" value="notask">
		<input type="hidden" name="redirect" value="http%3A%2F%2Fdev.MoneyHero.hk%2F">
		<input type="hidden" name="hiddenlists" value="1">
		<input type="hidden" name="redirectunsub" value="http%3A%2F%2Fdev.MoneyHero.hk%2F">
		<input type="hidden" name="option" value="com_acymailing">
	</form>
</div>
<div class="acymailing_module" id="acymailing_module_formAcymailing99381"></div>

        </section> <!-- End Saving tips -->
        
        <section class="light-gray trusted-parners">
        	<div class="sec_grp">
            	<div class="row-fluid">
                	<div class="span6 partners">Over 80 Trusted Partners</div>
                	<div class="span6 view_all">View All <span class="icon-double-angle-right"></span></div>
                </div>
                <div class="row-fluid trusted-img">
                	<div class="span2"><img src="assets/img/trusted_partner1.png" alt="Maybank"></div>
                	<div class="span2"><img src="assets/img/trusted_partner2.png" alt="Maxis"></div>
                	<div class="span2"><img src="assets/img/trusted_partner3.png" alt="CIMB"></div>
                	<div class="span2"><img src="assets/img/trusted_partner4.png" alt="OCBC Bank"></div>
                	<div class="span2"><img src="assets/img/trusted_partner5.png" alt="Celcom"></div>
                	<div class="span2"><img src="assets/img/trusted_partner6.png" alt="Public Bank"></div>
                </div>
            </div>
        </section>
        
        <section class="whychoose"> <!-- Why Choose -->
        	<div class="sec_grp">
            	<div class="row-fluid">
                	<div class="span2 why-relatives">
                    	<img class="mascot2_img" src="assets/img/pose2.png" alt="Mascot 2">
                    </div>
                	<div class="span8 box-shadow">
                    	<div class="row-fluid">
                        	<div class="span12 whychoose-header">
                            	<h3>Why Choose <span class="text-compare">Money</span><span class="text-hero">Hero</span>?</h3>
                            </div>
                            <div class="row-fluid reason-why">
                            	<div class="span4 text-center">
                                	<img src="assets/img/why_choose1.png" alt="100 Impartial 100 independent">
                                    <p>100%&nbsp;Impartial 100%&nbsp;Independent</p>
                                </div>
                            	<div class="span4 text-center">
	                                <img src="assets/img/why_choose2.png" alt="Free and Without Obligation">
                                	<p>Free and Without Obligation</p>
                                </div>
                            	<div class="span4 text-center">
                                	<img src="assets/img/why_choose3.png" alt="Easy Market Comparison">
                                    <p>Easy Market Comparison</p>
                                </div>
                            </div>
                        </div>
                    </div>
                	<div class="span2 why-relatives">
                            <img src="assets/img/stamp1.png" alt="Mascot 2" width="200" height="200" class="stamp_img">
                            <a class="tell-me-more" href="#">Tell me More <span class="icon-double-angle-right"></span></a>
                    </div>
                </div>
            </div>
        </section> <!-- END Why Choose -->
        
        <section id="sec_why_cp_comparison" class="topline-big"> <!-- Why Comparhero's Credit Card comparison -->
        	<div class="sec_grp">
            	<div class="row-fluid">
                	<div class="span12">
                    	<h4>Why <span class="text-compare">Money</span><span class="text-hero">Hero</span>'s credit card comparison service?</h4>
                
                        <p>Choosing the right credit card for you may be complicated, especially now that there are various features introduced by the local and foreign banks in the country. We have the luxury of choosing a myriad of credit cards in the Malaysian market. With ComparGo, you can save time, money and energy to sign up for the one that best fits you. By just a few clicks away, you will be able to explore the variety of credit cards that may be highly beneficial for you.
</p>

<div class="accordion" id="accordion_creditcard">
                            <div class="accordion-group">
                                <div class="accordion-heading clearfix">
                                    <a class="accordion-toggle pull-left" data-toggle="collapse" data-parent="#why_cp_creditcard" href="#collapseOne">
                                        About Credit Cards
                                    </a>
                                    <span class="icon-angle-up pull-right"></span>
                                </div>
                                <div id="collapseOne" class="accordion-body collapse">
                                    <div class="accordion-inner">A credit card allows you to purchase something without using your cash. It works in a way where we are borrowing money from the issuer (the bank) to pay for the products or services that we wish to have and be billed by the end of the month. This facility allows us to defer payment, but not avoiding it.
                                    </div>
                                </div>
                            </div>
                            <div class="accordion-group">
                                <div class="accordion-heading clearfix">
                                    <a class="accordion-toggle pull-left" data-toggle="collapse" data-parent="#why_cp_creditcard" href="#collapseTwo">
                                        Who Can Apply?
                                    </a>
                                    <span class="icon-angle-up pull-right"></span>
                                </div>
                                <div id="collapseTwo" class="accordion-body collapse in">
                                    <div class="accordion-inner">
                                        Lorem ipsum dolor sit amet, consectetuer adipiscing elit, sed diam nonummy nibh euismod tincidunt ut laoreet dolore magna aliquam erat volutpat. Ut wisi enim ad minim veniam, quis nostrud exerci tation ullamcorper suscipit lobortis nisl ut aliquip ex ea commodo consequat. Duis autem vel eum iriure dolor in hendrerit in vulputate velit esse molestie consequat, vel illum
                                    </div>
                                </div>
                            </div>
                            <div class="accordion-group">
                                <div class="accordion-heading clearfix">
                                    <a class="accordion-toggle pull-left" data-toggle="collapse" data-parent="#why_cp_creditcard" href="#collapseThree">
                                        Which One Should I Apply For?
                                    </a>
                                    <span class="icon-angle-up pull-right"></span>
                                </div>
                                <div id="collapseThree" class="accordion-body collapse in">
                                    <div class="accordion-inner">
                                        Lorem ipsum dolor sit amet, consectetuer adipiscing elit, sed diam nonummy nibh euismod tincidunt ut laoreet dolore magna aliquam erat volutpat. Ut wisi enim ad minim veniam, quis nostrud exerci tation ullamcorper suscipit lobortis nisl ut aliquip ex ea commodo consequat. Duis autem vel eum iriure dolor in hendrerit in vulputate velit esse molestie consequat, vel illum
                                    </div>
                                </div>
                            </div>
                            <div class="accordion-group">
                                <div class="accordion-heading clearfix">
                                    <a class="accordion-toggle pull-left" data-toggle="collapse" data-parent="#why_cp_creditcard" href="#collapseFour">
                                        Features To Check Out:
                                    </a>
                                    <span class="icon-angle-up pull-right"></span>
                                </div>
                                <div id="collapseFour" class="accordion-body collapse in">
                                    <div class="accordion-inner">
                                        Lorem ipsum dolor sit amet, consectetuer adipiscing elit, sed diam nonummy nibh euismod tincidunt ut laoreet dolore magna aliquam erat volutpat. Ut wisi enim ad minim veniam, quis nostrud exerci tation ullamcorper suscipit lobortis nisl ut aliquip ex ea commodo consequat. Duis autem vel eum iriure dolor in hendrerit in vulputate velit esse molestie consequat, vel illum
                                    </div>
                                </div>
                            </div>
                        </div>
                        
						<p>To find out more about credit cards read our comprehensive credit cards guide to learn the tips and tricks in using a credit card effectively.</p>
						<p>Alternatively, find answers to the frequently asked questions on our FAQ page.</p>
						<p>Having challenges understanding jargons? We have designed a glossary page just for you.</p>
                        
                        <a href="credit-cards/comparison" class="btn btn-warning btn-large btn-compare-now">Compare Now <span class="icon-double-angle-right"></span></a>
                    </div>
                </div>
            </div>
        </section> <!-- END Why Comparhero's Credit Card comparison -->
        
        <div class="divider_gray"></div>

                <section id="customer_say_like" class="topline-big"> <!-- WHAT CUSTOMER SAY -->
            <div class="sec_grp">
                <div class="row-fluid">
                    <div id="customer_say" class="span6">
                        <div class="row-fluid">
                            <div class="span12 text-right">See What our customers say!</div>
                        </div>
                        <div class="row">
                            <span id="fb_prev" style="float: left;" class="icon-double-angle-left"></span>
                            <div id="fb_sayings">                           
                                <img id="fb_pic" class="img-circle pull-left" src="assets/img/crood1.jpg" alt=""><br class="visible-phone" />
                                <p class="p_1">Provided detailed information and advised us to make the most suitable purchase!</p>
                                <p class="p_2">Miranda, 28</p>
                            </div>
                            <span id="fb_next" style="float: right;" class="icon-double-angle-right"></span>
                        </div>
                    </div>
                    <div class="span6">
                        <img src="assets/img/fb_likes.png" alt="">
                    </div>
                </div>
            </div>
        </section> <!-- END WHAT CUSTOMER SAY -->

        <section id="promotions_news"> <!-- Promotion & News-->
            <div class="sec_grp">
                <div class="row-fluid"> 
                    <div class="span6 box_topline box-shadow"> <!-- LATEST PROMOTIONS -->
                        <div class="row-fluid box_header">
                            <div class="span6"><h4>latest promotions</h4></div>
                            <div class="span6 text-right discover_more hidden-phone"><a class="view_all" href="#">Discover more offers <span class="icon-double-angle-right"></span></a></div>
                        </div>
                        <div class="row-fluid">
                            <div class="span4 text-center">
                                <img src="assets/img/latest_promo1.png" alt="">
                                <p>is simply dummy text of the Ipsum has been</p>
                            </div>
                            <div class="span4 text-center">
                                <img src="assets/img/latest_promo2.png" alt="">
                                <p>is simply dummy text of the Ipsum has been</p>
                            </div>
                            <div class="span4 text-center">
                                <img src="assets/img/latest_promo3.png" alt="">
                                <p>is simply dummy text of the Ipsum has been</p>
                            </div>
                        </div>
                        <div id="phone_discover_more" class="visible-phone">
                            <a class="view_all" href="#">Discover more offers <span class="icon-double-angle-right"></span></a>
                        </div>
                    </div> <!-- END LATEST PROMOTIONS -->
                    <div class="span6 box_topline box-shadow"> <!-- NEWS -->
                        <div class="row-fluid box_header">
                            <div class="span6"><h4>News</h4></div>
                            <div class="span6 text-right discover_more hidden-phone"><a class="view_all" href="#">View All <span class="icon-double-angle-right"></span></a></div>
                        </div>
                        <div class="row-fluid">
                            <div class="span4 text-center">
                                <img src="assets/img/latest_promo1.png" alt="">
                                <p>is simply dummy text of the Ipsum has been</p>
                            </div>
                            <div class="span4 text-center">
                                <img src="assets/img/latest_promo2.png" alt="">
                                <p>is simply dummy text of the Ipsum has been</p>
                            </div>
                            <div class="span4 text-center">
                                <img src="assets/img/latest_promo3.png" alt="">
                                <p>is simply dummy text of the Ipsum has been</p>
                            </div>
                        </div>
                        <div id="phone_discover_more" class="visible-phone">
                            <a class="view_all" href="#">View All <span class="icon-double-angle-right"></span></a>
                        </div>
                    </div> <!-- END NEWS -->
                </div> 

            </div>
        </section> <!-- End Promotion & News-->

        <section id="more_guides"> <!-- MORE GUIDES -->
            <div class="sec_grp">
                <div class="row-fluid">
                    <div id="read_guides" class="span8 box_topline"> <!-- Most Read Guides -->
                        <div class="row-fluid">
                            <div id="rg_menu" class="span3"> <!-- Menu -->
                                <ul class="unstyled">
                                    <li><a href="#">Banking</a></li>
                                    <li><a href="#">Savings</a></li>
                                    <li><a href="#">Credit Cards</a></li>
                                    <li><a href="#">Debit Cards</a></li>
                                    <li><a href="#">Loans</a></li>
                                    <li><a href="#">Insurance</a></li>
                                    <li><a href="#">Retirement</a></li>
                                </ul>
                            </div> <!-- END Menu -->
                            <div id="reads" class="span9 box">
                                <h3>Most Read Guides</h3>
                                <div class="row-fluid">
                                    <div class="span6">
                                        <img class="img-polaroid" src="assets/img/read_guide1.png" alt="">
                                        <p>Lorem Ipsum Start Saing?</p>
                                        <p>26th Aug, 2013</p>
                                    </div>
                                    <div class="span6">
                                        <img class="img-polaroid" src="assets/img/read_guide1.png" alt="">
                                        <p>Lorem Ipsum Start Saing?</p>
                                        <p>26th Aug, 2013</p>
                                    </div>
                                </div>

                                <div class="row-fluid">
                                    <div class="span6">
                                        <img class="img-polaroid" src="assets/img/read_guide1.png" alt="">
                                        <p>Lorem Ipsum Start Saing?</p>
                                        <p>26th Aug, 2013</p>
                                    </div>
                                    <div class="span6">
                                        <img class="img-polaroid" src="assets/img/read_guide1.png" alt="">
                                        <p>Lorem Ipsum Start Saing?</p>
                                        <p>26th Aug, 2013</p>
                                    </div>
                                </div>

                                <div class="row-fluid">
                                    <div class="span6">
                                        <img class="img-polaroid" src="assets/img/read_guide1.png" alt="">
                                        <p>Lorem Ipsum Start Saing?</p>
                                        <p>26th Aug, 2013</p>
                                    </div>
                                    <div class="span6">
                                        <img class="img-polaroid" src="assets/img/read_guide1.png" alt="">
                                        <p>Lorem Ipsum Start Saing?</p>
                                        <p>26th Aug, 2013</p>
                                    </div>
                                </div>
                            </div>
                        </div>


                    </div> <!-- END Most Read Guides -->

                    <div class="span4"> <!-- Watch and Polls -->
                        <div class="row-fluid">
                            <div class="span12 video">
                                <img src="assets/img/video_test.png" alt="">
                                <p class="text-center">Lorem Ipsum is the gaher tyleyr ember</p>
                            </div>
                        </div>
                        <div class="row-fluid">
                            <div class="span12 polls box_topline box-shadow">
                                <img src="assets/img/poll_img.png" alt="">
                            </div>
                        </div>
                        <div id="international_flags" class="row-fluid hidden-phone">
                            <div class="span12">
                                <p class="text-center">
                                    <span class="text-compare">Money</span><span class="text-hero">Hero</span> International</p>
                                <img src="assets/img/mini_flag1.png" alt="">
                                <img src="assets/img/mini_flag2.png" alt="">
                                <img src="assets/img/mini_flag3.png" alt="">
                                <img src="assets/img/mini_flag4.png" alt="">
                                <img src="assets/img/mini_flag5.png" alt="">
                                <img src="assets/img/mini_flag6.png" alt="">
                            </div>
                        </div>
                    </div> <!-- END Watch and Polls -->
                </div>
            </div>
        </section> <!-- END MORE GUIDES -->

        <section id="social_share"> <!-- Social Share -->
            <div class="row-fluid">
                <div class="span12 text-center">
                    <img src="assets/img/social/facebook_square_off.png" alt="">
                    <img src="assets/img/social/twitter_square_off.png" alt="">
                    <img src="assets/img/social/youtube_square_off.png" alt="">
                    <img src="assets/img/social/gplus_square_off.png" alt="">
                    <img src="assets/img/social/blog_square_off.png" alt="">
                </div>
            </div>
        </section> <!-- Social Share -->

        <section id="concept_on"> <!-- Concept On -->
            <div class="sec_grp">
                <div class="row-fluid">
                    <div class="span12"><p>Concept seen on:</p></div>
                </div>
                <div class="row-fluid">
                    <div class="span12 text-center">
                        <img class="pull-left img-edge" src="assets/img/concept_on1.png" alt="">
                        <img src="assets/img/concept_on2.png" alt="">
                        <img src="assets/img/concept_on3.png" alt="">
                        <img src="assets/img/concept_on4.png" alt="">
                        <img class="pull-right img-edge" src="assets/img/concept_on5.png" alt="">
                    </div>
                </div>
            </div>
        </section> <!-- End Concept On -->

        <footer> <!-- Footer -->
            <section class="foot_head">
                <p>Malaysia's Leading Comparison Portal!</p>
            </section>
            <section class="foot_leading">
                <div class="sec_grp">
                    <div class="row-fluid portal_listings"> <!-- Listings of Leading portals -->
                        <div class="span2"> <!-- Comparison Portal 1 -->
                            <h4>Cards</h4>
                            <ul class="unstyled">
                                <li>Credit Cards</li>
                                <li>Debit Cards</li>
                                <li>Comparison</li>
                                <li>FAQ</li>
                                <li>Glosary</li>
                                <li>Guide</li>
                            </ul>
                        </div> <!-- End Comparison Portal 1 -->
                        <div class="span2"> <!-- Comparison Portal 2 -->
                            <h4>Loans</h4>
                            <ul class="unstyled">
                                <li>Credit Cards</li>
                                <li>Debit Cards</li>
                                <li>Comparison</li>
                                <li>FAQ</li>
                                <li>Glosary</li>
                                <li>Guide</li>
                            </ul>
                        </div> <!-- End Comparison Portal 2 -->
                        <div class="span2"> <!-- Comparison Portal 3 -->
                            <h4>Deposits</h4>
                            <ul class="unstyled">
                                <li>Credit Cards</li>
                                <li>Debit Cards</li>
                                <li>Comparison</li>
                                <li>FAQ</li>
                                <li>Glosary</li>
                                <li>Guide</li>
                            </ul>
                        </div> <!-- End Comparison Portal 3 -->
                        <div class="span2"> <!-- Comparison Portal 4 -->
                            <h4>Insurance</h4>
                            <ul class="unstyled">
                                <li>Credit Cards</li>
                                <li>Debit Cards</li>
                                <li>Comparison</li>
                                <li>FAQ</li>
                                <li>Glosary</li>
                                <li>Guide</li>
                            </ul>
                        </div> <!-- End Comparison Portal 4 -->
                        <div class="span2"> <!-- Comparison Portal 5 -->
                            <h4>Mobile</h4>
                            <ul class="unstyled">
                                <li>Credit Cards</li>
                                <li>Debit Cards</li>
                                <li>Comparison</li>
                                <li>FAQ</li>
                                <li>Glosary</li>
                                <li>Guide</li>
                            </ul>
                        </div> <!-- End Comparison Portal 5 -->
                        <div class="span2"> <!-- Comparison Portal 6 -->
                            <h4>Internet Plans</h4>
                            <ul class="unstyled">
                                <li>Credit Cards</li>
                                <li>Debit Cards</li>
                                <li>Comparison</li>
                                <li>FAQ</li>
                                <li>Glosary</li>
                                <li>Guide</li>
                            </ul>
                        </div> <!-- End Comparison Portal 6 -->
                    </div> <!-- END Listings of Leading portals -->

                    <div class="row-fluid"> <!-- END Footer Menu bar -->
                        <div class="span12 footer_menu_bar">
                            <a href="#">About</a><span class="nav-pipe">|</span>
                            <a href="#">Contact Us</a><span class="nav-pipe">|</span>
                            <a href="#">FAQs</a><span class="nav-pipe">|</span>
                            <a href="#">Product Guide</a><span class="nav-pipe">|</span>
                            <a href="#">Careers</a><span class="nav-pipe">|</span>
                            <a href="#">Privacy Policy</a><span class="nav-pipe">|</span>
                            <a href="#">Terms &amp; Conditions</a><span class="nav-pipe">|</span>
                            <a href="#">Glossary</a><span class="nav-pipe">|</span>
                            <a href="#">Affiliates</a><span class="nav-pipe">|</span>
                            <a href="#">Press</a><span class="nav-pipe">|</span>
                            <a href="#">Sitemap</a><span class="nav-pipe">|</span>
                            <a href="#">Blog</a>
                        </div>
                    </div> <!-- END Footer Menu bar -->
                </div>
            </section>

            <section class="footer_head2">
                <div class="sec_grp">
                    <div class="row-fluid">
                        <div class="span4">
                            <h4>Independent &amp; Impartial </h4>
                        </div>
                        <div class="span4 text-center">
                            <h4>Free &amp; Without obligation</h4>
                        </div>
                        <div class="span4 text-right">
                            <h4>Easy Market Comparison</h4>
                        </div>
                    </div>
                </div>
            </section>

            <section class="footer-logos">
                <div class="row-fluid">
                    <div class="span12">
                        <img src="assets/img/logo_asa.png" alt="Advertizing Standards in Malaysia">
                        <img src="assets/img/logo_perbankan.png" alt="Info Perbankan">
                        <img src="assets/img/logo_insurance.png" alt="Insurance Info">
                        <img src="assets/img/logo_msc.png" alt="Malaysia Status Company">
                    </div>
                </div>
            </section>

            <section class="copyright">  
                <div class="sec_grp">
                    <p>Â© 2013 MoneyHero Global Limited. All rights reserved. Use of this site constitutes acceptance of our Terms of Use and Privacy Policy.</p>
                </div>
            </section>
        </footer> <!-- End Footer -->
		
		
		

{literal}
<script type="text/mustache" id="cc-row-tpl">
	<?php include('assets/tpl/cc-row.html'); ?>
</script>
<script type="text/mustache" id="cc-block-tpl">
	<?php include('assets/tpl/cc-block.html'); ?>
</script>
<script type="text/mustache" id="cc-more-tpl">
	<?php include('assets/tpl/cc-more.html'); ?>
</script>
<script type="text/mustache" id="tab_menu-tpl">
	<?php include('assets/tpl/tab_menu.html'); ?>
</script>
<script type="text/mustache" id="cc-filter-tpl">
	<?php include('assets/tpl/cc-filter.html'); ?>
</script>

<script src="assets/js/jquery-1.9.1.min.js"></script>
<script src="assets/js/can.custom.js"></script>
<script src="assets/js/lodash.js"></script>
<script src="assets/js/scrolling.min.js"></script>
<script src="assets/js/jquery.fittext.js"></script>


<script type="text/javascript" charset="utf-8">
$.fn.isOnScreen = function(){

    var win = $(window);

    var viewport = {
        top : win.scrollTop(),
        left : win.scrollLeft()
    };
    viewport.right = viewport.left + win.width();
    viewport.bottom = viewport.top + win.height();

    var bounds = this.offset();
    bounds.right = bounds.left + this.outerWidth();
    bounds.bottom = bounds.top + this.outerHeight();

    return (!(viewport.right < bounds.left || viewport.left > bounds.right || viewport.bottom < bounds.top || viewport.top > bounds.bottom));

};
	var CreditCardList, TabFilter, tabs;
	tabs = [
		["all", true, "All", "" ,"icon-cc-all.png"], 
		["hasCashBack", true, "Cashback", "", "icon-cc-cashback.png"], 
		["hasPoints", true, "Points", "","icon-cc-points.png"], 
		["hasAirMiles", true, "Airmiles", "","icon-cc-airmiles.png"], 
		["interestRate", 3, "Low Interest", "less","icon-cc-low-interest.png"], 
		["annualFee", 0, "No Fees", "","icon-cc-no-fees.png"], 
		["hasPetrolRewards", true, "Petrol", "","icon-cc-petrol.png"], 
		["premium", true, "Premium", "","icon-cc-premium.png"]
	];
	
	TabFilterControl = can.Control({
		data: new can.Map({tabs: tabs}),
		init: function(element, options) {
			var self = this;
            can.view('tab_menu-tpl', this.data, function(html){
				setTimeout(function(){
            		self.element.html(html)
						.promise().done(function(){
							$($('li', this)[0]).addClass('active');
						});
            	}, 10);
				
            });
			
		},
		"li click": function(el, ev) {
			ev.preventDefault();
			this.element.find('li').removeClass('active');
			el.addClass('active');
			CreditCardList.tabFilter(el.attr('data-attr'), el.attr('data-match'), el.attr('data-match-with')); 
			console.log('tabs');
		}	
	});
	
	TabFilter = new TabFilterControl('#tab_menu');
	
	FormFilterControl = can.Control({
		data: new can.Map({pars: [], banks: [], providers: [], filterBlockButton: 'Show', filterBlockIsOpen: false}),

		init: function(element, options) {
			var self = this;
			
            can.view('cc-filter-tpl', this.data, function(html){
				setTimeout(function(){
            		self.element.html(html)
						.promise().done(function(){
							
						});
            	}, 10);
				
            });
		},
		
		'a.checkall click': function(el, ev) {
			ev.preventDefault();
			var cls = $(el).attr('data-all');
			//console.log(cls, $('input.' + cls, this.element));
			
			//reset the filters
			if(cls.indexOf('bankName') > -1) {
				CreditCardList.lastFilter['bankName'] = [];
			}
			//reset the filters
			if(cls.indexOf('cardProvider') > -1) {
				CreditCardList.lastFilter['cardProvider'] = [];
			}
			
			var all = $('input.' + cls, this.element);
			all.prop('checked', true)
				.promise()
				.done(
					setTimeout(function(){
						all.trigger('change');
					}, 10)
				);
			
			//.trigger('change');
			
		},
		
		'input change': function(el, ev) {
			var name = $(el).attr('name');
			var val = $(el).val();
			var type = $(el).attr('type');
			var removed;
			
			console.log(name, val, removed);
			if(type == 'checkbox' && !$(el).is(':checked')) {
				removed = true;
			}
			console.log(name, val, removed);
			
			CreditCardList.formFilter(name, val, removed); 
		},
		'a.adv_opt_pane click': function(el, ev) {
			ev.preventDefault();
			$('#collapseOne').toggle();
			if($('#collapseOne').is(':hidden')) {
				filterBlockButton = 'Show';
				filterBlockIsOpen = false;
			} else {
				filterBlockButton = 'Hide';
				filterBlockIsOpen = true;
			}
			
			this.data.attr('filterBlockButton', filterBlockButton);
			this.data.attr('filterBlockIsOpen', filterBlockIsOpen);
		},
		'a.reset-filters click': function(el, ev) {
			ev.preventDefault();
			this.element.find('input').prop('checked', false);
			CreditCardList.formFilterReset();
		}	
	});
	
	FormFilter = new FormFilterControl('#credit_results_grp3');
	
	$.getJSON('/assets/mock.json', function(reply){
		//var ldata = new can.List(reply);
		var ldata = [];
		try {
			ldata = reply.compargoGlobalApiResponse.searchResults.searchResultItems;
	    } catch(e) {
			console.error(ldata);
		}
		
		CreditCardControl = can.Control({
			rawjson: reply,
			rawlist: ldata.slice(0),
			lastData: null,
			lastDataTotal: null,
			lastGroupData: null,
			lastGroupKey: 0,
			lastSortKey: null,
			lastSortDir: 'desc',
			lastFilter: {},
			mdata: new can.Map({data:ldata}),
			tabSet: null,
			limit: 20,
			viewCache: {},
			chunker: function(arr, chunk) {
				var i, j, temparray = [];
				for (i = 0, j = arr.length; i < j; i += chunk) {
				  temparray.push(arr.slice(i, i + chunk));
				}
				return temparray;	
			},
			cache: function(scope) {
				var self = scope;
				return {
					isSet: function(ckey) {
						if(self.viewCache[ckey] != undefined) return true;
						
						return false;
					},
					get: function(ckey) {
						if(self.viewCache[ckey] != undefined) return self.viewCache[ckey];
						
						return false;
					},
					set: function(ckey, html) {
						self.viewCache[ckey] = html;
					},
					getKey: function() {
						var ckey = [
									self.tabSet, 
									self.lastGroupKey, 
									self.lastSortKey, 
									self.lastSortDir,
									self.limit
							].join("-");
						return ckey;	
					}
					
				}	
			},
			
			initFormFilterData: function() {
				var banks = _.uniq(_.pluck(this.rawlist, 'bankName'));
				FormFilter.data.attr('banks', banks);
				var providers = _.uniq(_.pluck(this.rawlist, 'cardProvider'));
				FormFilter.data.attr('providers', providers);
			},
			
			'.goto_site click': function(el, ev) {
				ev.preventDefault();
				var id = $(el).attr('data-id');
				var rowInfo = $(el).data('rowInfo');
				//rowInfo uses can.Map; use attr method to access attributes
				console.log("trigger to modal or visit site here!", id, rowInfo, rowInfo.attr('productId'), rowInfo.attr('cardProvider'));	
				window.open(rowInfo.attr('link'),'_blank');
			},
			
			'.credit_card_comparison span[data-sort] click': function(el, ev) {
				ev.preventDefault();
				var eData = _.merge({}, $(el).data());
				console.log('sort', $(el).data(), eData);
				
				if(!$(el).hasClass('active')) {
					//reset to initial sort!
					eData.dir = "";
				}
				
				if(eData.dir == "") {
					eData.dir = $(el).data('dirInit');
				} else {
					if(eData.dir != null) {
						if(eData.dir == 'asc') {
							eData.dir = 'desc';
						} else {
							eData.dir = 'asc';
						}
					}
				}
				
				var sortButtons = $('.credit_card_comparison span[data-sort]');
					sortButtons
						.removeClass('active')
						.removeClass('asc')
						.removeClass('desc');
				var dirIcons = $('span.icondir', sortButtons);
				 	dirIcons
						.removeClass('icon-caret-up')
						.removeClass('icon-caret-down')
					
					
				$(el)
					.addClass('active')
					.addClass(eData.dir)
					.data('dir', eData.dir);
				
				if(eData.dir == 'asc') {
					icondir = 'icon-caret-up';
				} else {
					icondir = 'icon-caret-down';
				}
				
				if(eData.sort == 'bestSeller') {
					icondir = 'icon-caret-up';
				}
				
				$('span.icondir', el).addClass(icondir);
				
				console.log("sortData", eData);
				this.setSortLogic(eData);
			},
			initSortLogic: function() {
				console.log("initSortLogic");
				this.sortLogic = {
					rewards: [function(row) {
						var rr = ['hasCashBack', 'hasAirMiles', 'hasPetrolRewards', 'hasPoints'];
						var pts = 0;
						_.each(rr, function(r){
							if(row[r] == 'true') pts++;
						});
						
						return pts + (row['ranking']*1);
						
					}, {reverseDataInit: true}],
					bestSeller: [function(row) {
						return row[this.field] * 1;
					}, {field: 'ranking', reverseData: true}],
					balanceTransfer: [function(row) {
						return row[this.field] * 1;
					}, {field: 'balanceTransfer'}],
					annualFee: [function(row) {
						return row[this.field] * 1;
					}, {field: 'annualFee'}],
					interestRate: [function(row) {
						return row[this.field] * 1;
					}, {field: 'interestRate'}],
				};
				console.log("initSortLogic", this.sortLogic);
				
			},
			
			setSortLogic: function(data) {
				
				var func = data.sort;
				console.log("setSortLogic", typeof this.sortLogic[func], this.sortLogic, func);
				if(this.sortLogic[func] != undefined) {
					var method, scope = {};
					if(_.isArray(this.sortLogic[func])) {
						method = this.sortLogic[func][0];
						if(this.sortLogic[func][1] != undefined) scope = this.sortLogic[func][1];
					} else {
						method = this.sortLogic[func];
					}
					//data-dir="desc" data-dir-init="desc"
					if(data.dir !== data.dirInit) {
						data.reverseData = true;
					} else {
						//if(data.dir == 'desc' && data.dirInit == null) {
						//	data.reverseData = true;
						//}
					
						if(data.reverseDataInit != undefined && data.dirInit  === data.dir) {
							data.reverseData = true;
						} else {
							delete(data.reverseData);
						}
					}
					
					
					
					this.sortLogicFilter = {
						func: method,
						scope: _.merge(data, scope)
					}
				}
				
				if(this.lastTabFilterArgs != undefined) {
					var fargs = this.lastTabFilterArgs;
					
					this.tabFilter(fargs[0], fargs[1], fargs[2]);
				}
				
			},
			
	        init: function(element, options) {
	             this._cache = new this.cache(this);
				 
				//this.element.find('.progress-bar').css({'width':'70%'});
				this.initFormFilterData();
				this.initSortLogic();
				this.lastData = this.rawlist;
				this.lastGroupData = this.chunker(this.rawlist, this.limit);
				var initData = this.lastGroupData[this.lastGroupKey];
				console.log('init', initData);	
				this.lastDataTotal = this.lastData.length;
				this.mdata.attr('data', initData);
				this.mdata.attr('total', this.lastDataTotal);
				//this.element.find('.progress-bar').css({'width': '86%'});
				
				
				var self = this;
				console.log('init');
				Mustache.registerHelper('kvVal', function(opt) {
					for(k in opt) {
						if(k.indexOf('keyBenefit') > -1) {
							return opt[k];
						}
					}
				});
		        
				Mustache.registerHelper('showCurrency', function(row, k) {
					var cur = row[k];
					//console.log("xxx", cur);
					if(cur == 'Dual') return 'HKD';
					
					return cur;
				});
		        
				Mustache.registerHelper('showSymbol', function(row, k) {
					var cur = row[k];
					if(cur == 'Dual' || cur == 'HKD') return '$';
					
					if(cur == 'RMB') return 'Â¥';
					
				});
		        
	            can.view('cc-block-tpl', this.mdata, function(html){
					//self.element.find('.progress-bar').css({'width': '98%'});
                        setTimeout(function(){
                            self.element.html(html);
                        }, 10);
                        
	             });
	                
	            this.tabFilter('all', 'all');
				_.bindAll(this, 'scroll');
				scrolling(window, this.scroll);
	            
	        },
			
			
			tabFilter: function(attr, matchKey, matchWith, cb) {
				scrolling.remove(window, this.scroll);
				this.element.find('.results-more').remove();
				if(attr === this.tabSet) return;
				
				this.lastTabFilterArgs = [attr, matchKey, matchWith];
				
				var sortScope, sortFunc;
				console.log('sortLogicFilter', this.sortLogicFilter);
				if(this.sortLogicFilter != undefined) {
					sortFunc = this.sortLogicFilter['func'];
					sortScope = this.sortLogicFilter['scope'];
				}
				
				var ckey = this._cache.getKey() + '::lastData' + [attr, matchKey, matchWith].join('-') + '::' + JSON.stringify(this.lastFilter) + '::' + JSON.stringify(sortScope);
				
				var nkey = ckey + '::groupChunked';
				    
				//console.log('ckey::lastData', ckey);
				if(this._cache.isSet(ckey)) {
					console.log('ckey::lastData - cache hit');
					this.lastData = this._cache.get(ckey);
				} else {
					
					var filter = {}, data;
				
                    var ldata = this.rawlist.slice(0);
                    
                    if(attr != 'all') {
                        if(attr != 'interestRate') {
                            filter[attr] = matchKey + "";
                            data = _.where(ldata, filter);
                        } else {
                            data = _.filter(ldata, function(row){
                                if((row[attr] *1) < matchKey) {
                                    return row;	
                                }	
                            });
                        }
                        
                    } else {
                        data = ldata;
                    }
                    
					if(!_.isEmpty(this.lastFilter)) {
						var self = this;
						console.log("filterFunc", self.lastFilter);
						var f = function(row){
							var lastFilter = this;
							var tests = [];
							var ntests = {};
							for(k in lastFilter) {
								if(!_.isEmpty(lastFilter[k])) {
									if(!_.isArray(lastFilter[k])) {
										tests = [];
										
										if(row[k] === lastFilter[k]) {
											tests.push(true);
											ntests[k] = true;
										} else {
											tests.push(false);
											ntests[k] = false;
										}
									} else {
										if(_.contains(lastFilter[k], row[k])) {
											tests.push(true);
											ntests[k] = true;
										} else {
											tests.push(false);
											ntests[k] = false;
										}
									}
								}
								//console.log("filterFuncx", k);
							
							}
							
							
							hasFalse = false;
							for(kk in ntests) {
								if(ntests[kk] === false) {
									hasFalse = true;
									break;
								}
							}
							
							//console.log("filterFunc tests", tests, ntests, hasFalse);
							
							if(hasFalse === false) {
								return row;
							} 
							//if(!_.contains(alltests, false)) return row;
                        };
						
                        data = _.filter(ldata, f, this.lastFilter);
						console.log('filter by form', this.lastFilter);
					} 
					
					if(sortFunc != undefined) {
						data = _.sortBy(data, sortFunc, sortScope);
						
						if(sortScope.reverseData != undefined && sortScope.reverseData) {
							data.reverse();
						}
					}
					
                    console.log("cclist", filter, attr, this.tabSet, matchKey, matchWith);
                    
                    this.lastData = data;
					this._cache.set(ckey, this.lastData);
				}
				
				if(this._cache.isSet(nkey)) {
					console.log('ckey::lastDataGroup - cache hit');
					this.lastGroupData = this._cache.get(nkey);
				} else {
				    this.lastGroupData = this.chunker(this.lastData, this.limit);
				    this._cache.set(nkey, this.lastGroupData);
				}
                
				this.lastGroupKey = 0;
				this.lastDataTotal = this.lastData.length;
				var dataChunk = this.lastGroupData[this.lastGroupKey];
				this.mdata.attr('total', this.lastDataTotal);
				this.mdata.attr('data', dataChunk);
				_.bindAll(this, 'scroll');
				scrolling(window, this.scroll);	
		        if(cb != undefined) {
		            cb();
                }						
					
			},
			
			formFilter: function(name, val, remove) {
				if(name == 'cardType') {
					if(val !== 'null') {
						this.lastFilter['cardType'] = val;
					} else {
						delete(this.lastFilter['cardType']);
					}
				}
				if(name == 'institutionalCard') {
					if(val !== 'null') {
						this.lastFilter['institutionalCard'] = val;
					} else {
						delete(this.lastFilter['institutionalCard']);
					}
					
				}
				if(name == 'currency') {
					if(val !== 'null') {
						this.lastFilter['currency'] = val;
					} else {
						delete(this.lastFilter['currency']);
					}
					
				}
				
				if(name == 'cardProvider') {
					if(this.lastFilter['cardProvider'] == undefined) {
						this.lastFilter['cardProvider'] = [];
					}
					if(remove != undefined) {
						var pos = this.lastFilter['cardProvider'].indexOf(val);
						if(pos > -1) this.lastFilter['cardProvider'].splice(pos, 1);
						
					} else {
						this.lastFilter['cardProvider'].push(val);
					}
					
				}
				
				if(name == 'bankName') {
					if(this.lastFilter['bankName'] == undefined) {
						this.lastFilter['bankName'] = [];
					}
					if(remove != undefined) {
						var pos = this.lastFilter['bankName'].indexOf(val);
						if(pos > -1) this.lastFilter['bankName'].splice(pos, 1);
						
					} else {
						this.lastFilter['bankName'].push(val);
					}
					
					
					
				}
				var providersPick = false, banksPick = false;
				if(this.lastFilter['cardProvider'] && this.lastFilter['cardProvider'].length > 0) {
					providersPick = this.lastFilter['cardProvider'].length + '/' + FormFilter.data.attr('providers').length;
				}
				FormFilter.data.attr('providersPick', providersPick);
				
				if(this.lastFilter['bankName'] && this.lastFilter['bankName'].length > 0) {
					banksPick = this.lastFilter['bankName'].length + '/' + FormFilter.data.attr('banks').length;
				}
				FormFilter.data.attr('banksPick', banksPick);
				
				if(this.lastTabFilterArgs != undefined) {
					var fargs = this.lastTabFilterArgs;
					
					this.tabFilter(fargs[0], fargs[1], fargs[2]);
				}
				
			},
			
			formFilterReset: function() {
				this.lastFilter = {};
				FormFilter.data.attr('providersPick', null);
				FormFilter.data.attr('banksPick', null);
				
				if(this.lastTabFilterArgs != undefined) {
					var fargs = this.lastTabFilterArgs;
					
					this.tabFilter(fargs[0], fargs[1], fargs[2]);
				}
			},
			
			
			loadNext: function() {
				var self = this;
				var k = this.lastGroupKey + 1;
				if(this.lastGroupData[k] != undefined) {
					
					var moreData = new can.Map({more: []});
					//console.log(k, more.length, typeof this.scroll);
					this.element.append(can.view('cc-more-tpl', moreData));
					var nextBatch = self.lastGroupData[k];
					//setTimeout(function(){
						moreData.attr('more', nextBatch);
						if(self.lastGroupData[k + 1] != undefined) {
							_.bindAll(self, 'scroll');
							scrolling(window, self.scroll);
						}
					//}, 400);
					
					this.lastGroupKey++;
					
					
					
				} 
				
			},
			
			scroll: function(ev) {
				//console.log("scolling", ev);
				//var nearBottom = $(document).height() - $(window).height() - 50 <= $(window).scrollTop();
				if($('#results-tail').isOnScreen()) {
					scrolling.remove(window, this.scroll);
					this.loadNext();
					
				}
			}
	    });

	     CreditCardList = new CreditCardControl('#results');
		 
		
	});
</script>
{/literal}
